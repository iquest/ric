<% controller_path = controller.class.name.to_snake[0..-12] %>
<% display_breadcrumbs = defined?(breadcrumbs) %>
<% display_header = !(defined?(header) && header == false) %>

<div class="layout with-right-side">
	<div class="content">

		<%= render partial: "layouts/ric_admin/flash" %>

		<%= breadcrumbs style: :bootstrap if display_breadcrumbs %>
		
		<% if (defined?(header)) %>
			<% if header != false %>
				<div class="page-header"><h1><%= header %></h1></div>
			<% else %>
				<!-- No header -->
			<% end %>
		<% else %>
			<div class="page-header"><h1><%= t("headers.#{controller_path.gsub('/', '.')}.#{action_name}") %></h1></div>
		<% end %>

		<% if lookup_context.find_all("#{controller_path}/_filters").any? %>
			<% partial = render(partial: "#{controller_path}/filters") %>
			<% if !partial.trim(" \t\n").blank? || (defined?(enforce_filters) && enforce_filters == true) %>
				<div class="filters panel panel-default"><div class="panel-body">
					<!--<h2><%= t("headers.filters") %></h2>-->
					<%= partial %>
				</div></div>
			<% end %>
		<% end %>

		<%= yield %>

	</div>
	<div class="side <%= (display_breadcrumbs ? "pad-breadcrumbs" : "") %> <%= (display_header ? "pad-header" : "") %>">
		
		<% if lookup_context.find_all("#{controller_path}/_actions").any? %>
			<% partial = render(partial: "#{controller_path}/actions") %>
			<% if !strip_tags(partial).trim(" \t\n").blank? || (defined?(enforce_actions) && enforce_actions == true) %>
				<!--<h2><%= t("headers.actions") %></h2>-->
				<%= partial %>
			<% end %>
		<% end %>

		<% if lookup_context.find_all("#{controller_path}/_related").any? %>
			<% partial = render(partial: "#{controller_path}/related") %>
			<% if !strip_tags(partial).trim(" \t\n").blank? || (defined?(enforce_related) && enforce_related == true) %>
				<!--<h2><%= t("headers.related") %></h2>-->
				<%= partial %>
			<% end %>
		<% end %>

	</div>
</div>